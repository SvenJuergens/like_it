$(document).ready(function(){$(".tx-likeit-container").each(function(){var $container=$(this);var likedTable=$container.data("table");var likedUid=$container.data("uid");$.ajax({url:"/index.php?eID=tx_likeit_like&action=check&liked_table="+likedTable+"&liked_uid="+likedUid,success:function(result){processResult($container,result);}});});$(".tx-likeit-like").on("click",function(e){e.preventDefault();var $container=$(this).parent(".tx-likeit-container");var likedTable=$container.data("table");var likedUid=$container.data("uid");$.ajax({url:"/index.php?eID=tx_likeit_like&action=toggle&liked_table="+likedTable+"&liked_uid="+likedUid,success:function(result){processResult($container,result);}});});});function processResult($container,result){$container.find(".tx-likeit-amount-of-likes .amount-of-likes").text(result.amountOfLikes);if(result.liked===true){$container.find(".like-message").html(TYPO3.settings.tx_likeit.message_liked);$container.find(".tx-likeit-like").addClass("liked");}else{$container.find(".like-message").html(TYPO3.settings.tx_likeit.message_not_liked);$container.find(".tx-likeit-like").removeClass("liked");}}
